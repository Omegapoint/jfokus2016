<!DOCTYPE html>
<html>
<head>
  <title>Omega Gorillas</title>

  <link href="node_modules/codemirror/lib/codemirror.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/theme/the-matrix.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/theme/the-matrix.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/addon/lint/lint.css" type="text/css" rel="stylesheet"></link>
  <link href="styles/base.css" type="text/css" rel="stylesheet"></link>

  <script data-main="js/app.js" src="js/require.js"></script>
  <script src="js/helpers/playerCode.js"></script>
  <script src="js/helpers/modal.js"></script>
  <script src="js/helpers/highscore.js"></script>
  <script src="js/agent.js"></script>
  <script src="js/gameplay.js"></script>
</head>
<body>
  <div class=menu><!-- Start menu -->
    <!--<button id="play">Start Game</button>-->
    <button onclick="openModal('new_player')">New Player</button>
    <button id="load_player">Load Player</button>
    <button onclick="openModal('api_info')">Api</button>
    <button onclick="openModalWith(RulesModalText)">Rules</button>
    <span class="menu_title">by Omegapoint</span>
  </div><!-- End menu -->

  <table class="top-container">
    <tr>
      <td class="highscore"> <!-- Start highscore -->
        <h3>*** Highscore***</h3>
        <table id="highscore-table"  class="highscore-table"></table>
      </td> <!-- end highscore -->

      <td id="container"> <!-- Start game container -->
        <div class="players">
          <div id="player_1">
            P1: <span id="player_1_name"></span><br>
            Score: <span id="player_1_score">0</span>p
          </div>
          <div id="player_2">
            P2: CPU<br>
            Score: <span id="player_2_score">0</span>p
          </div>
        </div>
        <canvas id="canvas" width="640" height="350">
          <p>Browser does not support the canvas tag</p>
        </canvas>
      </td> <!-- end game container -->

      <td class="highscore-img">
        <img src="img/twogorillas.gif" >
      </td>

    </tr>
    <tr>
      <div class="ai_input" id="textbox">   <!-- Start input code -->
        <div class="menu">
            <button id="play">Play</button>
            <button onclick="savePlayerCode()">Save</button>
            <button onclick="resetPlayerCode()">Get latest save</button>
            <button onclick="clearPlayerCode()">Clear Code</button>
            <span class="menu_title" id="message_to_player"></span>
        </div>
        <textarea class="ai_input_code" id="textarea_player_code" rows="20" cols="50">
        </textarea>
      </div>  <!-- end input code -->
    </tr>
  </table>

<!-- === START MODALS === -->
  <div id="api_info" class="modal"> <!-- start API modal -->
    <div class="modal-content">
      <div class="modal-box">
        Parameters<br/><br />

        <table border=1>
          <tr><td align="right">Variable</td><td align="left">Type</td> <td>Description</td></tr>
           <tr><td align="right">lastBananaHit</td><td align="left">[float, float], undefined</td> <td>If no previous hit: undefined. Otherwise the variable contains the distance to the hit position of the previous throw.</td></tr>
            <tr><td align="right">opponent</td><td align="left">[float, float]</td> <td>The distance to your opponent, [x-axis, y-axis].</td></tr>
             <tr><td align="right">wind</td><td align="left">float</td> <td>The wind can be either positive or negative, depending on the direction.</td></tr>
              <tr><td align="right">memory</td><td></td> <td>A variable free to use, each time the function is called the memory from last called is set as input parameter.</td></tr>

        </table>
        <br><br>
         Return values<br/><br />
         The function must return the Json-structure:<br> 
         {"velocity": float,
          "angle": float,
          "memory": var}<br><br>
        <table border=1>
          <tr><td align="right">Variable</td><td align="left">Type</td> <td>Description</td></tr>
           <tr><td align="right">velocity</td><td align="left">float</td> <td>The desired force of your throw.</td></tr>
            <tr><td align="right">angle</td><td align="left">float</td> <td>The angle of the throw.</td></tr>
              <tr><td align="right">memory</td><td></td> <td>A variable free to use, each time the function is called the memory from last called is set as input parameter.</td></tr>

        </table>
        <hr>
        <button class="modal-btn-ok" onclick="closeModal('api_info')">
          < <ok><u>O</u>k</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end API modal -->

  <div id="new_player" class="modal"> <!-- start New Player modal -->
    <div class="modal-content">
      <div class="modal-box">
        <br/>
        New Player<br>
        <br>
        <form onsubmit="closeModalAndCreatePlayer()">
          <table>
            <tr>
              <td><label for="player_name">Enter handle: </label></td>
              <td>
                <input class="modal-input" type="text" id="player_name" required
                  pattern="[A-Za-z0-9-_]{4,20}" placeholder="Enter your handle">
              </td>
              <td>
                (Length: 4-20, Only letters, numbers, - and _ )
              </td>
            </tr>
            <tr>
              <td><label for="player_email"> Enter email: </label></td>
              <td>
                <input class="modal-input" type="email" id="player_email" required
                  placeholder="Enter a valid email">
              </td>
              <td>
                (To contact you when your winning ;) )
              </td>
            </tr>
          </table>
          <hr>
          <button type="submit" class="modal-btn-ok">
            < <ok>Create new player</ok> >
          </button>
        </form>
      </div>
    </div>
  </div> <!-- end New Player modal -->

  <div id="message_modal" class="modal"> <!-- start message modal -->
    <div class="modal-content">
      <div class="modal-box">
        <br>
        <span id="message_modal_content"></span>
        <hr>
        <button class="modal-btn-ok" onclick="closeModal('message_modal')">
          < <ok><u>O</u>k</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end message modal -->
<!-- === END MODALS === -->
</body>
</html>
