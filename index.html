<!DOCTYPE html>
<html>
<head>
  <title>Omega Gorillas</title>

  <link href="node_modules/codemirror/lib/codemirror.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/theme/the-matrix.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/theme/the-matrix.css" type="text/css" rel="stylesheet"></link>
  <link href="node_modules/codemirror/addon/lint/lint.css" type="text/css" rel="stylesheet"></link>
  <link href="styles/base.css" type="text/css" rel="stylesheet"></link>

  <script data-main="js/app.js" src="js/require.js"></script>
  <script src="js/helpers/customImpl.js"></script>
  <script src="js/helpers/modal.js"></script>
  <script src="js/helpers/highscore.js"></script>
  <script src="js/agent.js"></script>
  <script src="js/gameplay.js"></script>
</head>
<body>
  <div class=menu>
    <input id="play"      class="menu-button" type="button" value="Start Game" />
    <input id="newPlayer"  class="menu-button" type="button" onclick="openModal('new_player')" value="New Player" />
    <input id="clear"     class="menu-button" type="button" value="Clear All Code" />
    <input id="api"       class="menu-button" type="button" onclick="openModal('api_info')" value="API" />
    <input id="rules"     class="menu-button" type="button" onclick="openModal('rules_info')" value="About" />
    <span class="menu_title">by Omegapoint</span>
  </div>
  <table class="top-container">
    <tr>
      <td class="highscore"> <!-- Start highscore -->
        <h1>Highscore</h1>
        <br>
        <table id="highscore-table"  class="highscore-table">
        </table>
      </td> <!-- end highscore -->

      <td id="container"> <!-- Start game container -->
        <div class="players">
          <div id="player_1">
            Player 1<br>
            Score: <span id="player_1_score">0</span>p
          </div>
          <div id="player_2">
            Player 2<br>
            Score: <span id="player_2_score">0</span>p
          </div>
        </div>
        <canvas id="canvas" width="640" height="350">
          <p>Browser does not support the canvas tag</p>
        </canvas>
      </td> <!-- end game container -->

      <td class="highscore-img">
        <img src="img/twogorillas.gif" >
      </td>

    </tr>
  </table>


  <div class="ai_input" id="textbox">   <!-- Start input code -->
    <label class="ai_input_label" for="customImpl"></label>
    <textarea class="ai_input_code" id="customImpl" rows="20" cols="105%">
      function runPlayer(lastBananaHit, opponent, wind, memory){
        var angle = 30 + opponent['y'];
        var velocity = 5 - wind + (opponent['x'] * 0.05);
        var returnValues = new Object();

        returnValues['velocity'] = velocity;
        returnValues['angle'] = angle;
        returnValues['memory'] = "OP Gorillas is fun! :)";
        return returnValues;
      }
    </textarea>
  </div>  <!-- end input code -->


  <div id="api_info" class="modal"> <!-- start API modal -->
    <div class="modal-content">
      <div class="modal-box">
        Parameters<br/><br />

        <table border=1>
          <tr><td align="right">Variable</td><td align="left">Type</td> <td>Description</td></tr>
           <tr><td align="right">lastBananaHit</td><td align="left">[float, float], undefined</td> <td>If no previous hit: undefined. Otherwise the variable contains the distance to the hit position of the previous throw.</td></tr>
            <tr><td align="right">opponent</td><td align="left">[float, float]</td> <td>The distance to your opponent, [x-axis, y-axis].</td></tr>
             <tr><td align="right">wind</td><td align="left">float</td> <td>The wind can be either positive or negative, depending on the direction.</td></tr>
              <tr><td align="right">memory</td><td></td> <td>A variable free to use, each time the function is called the memory from last called is set as input parameter.</td></tr>

        </table>

        <br><br>
         Return values<br/><br />
         The function must return the Json-structure:<br> 
         {"velocity": float,
  "angle": float,
  "memory": var}<br><br>
        <table border=1>
          <tr><td align="right">Variable</td><td align="left">Type</td> <td>Description</td></tr>
           <tr><td align="right">velocity</td><td align="left">float</td> <td>The desired force of your throw.</td></tr>
            <tr><td align="right">angle</td><td align="left">float</td> <td>The angle of the throw.</td></tr>
              <tr><td align="right">memory</td><td></td> <td>A variable free to use, each time the function is called the memory from last called is set as input parameter.</td></tr>

        </table>
        <hr>
        <button class="modal-btn-ok" onclick="closeModal('api_info')">
          < <ok><u>O</u>k</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end API modal -->

  <div id="rules_info" class="modal"> <!-- start Rules modal -->
    <div class="modal-content">
      <div class="modal-box">
        <br/>
        About<br>
        <br>
        The Javascript code in the textbox below control Player 1 (The monkey to the left). A game consists of a total of 3 rounds with 10 throws per monkey and round. If no monkey has hit the other after 10 throws that round is considered a draw.
        <br/><br />
        Score<br>
        <br>
        Hitting the opponent gives you 10 points minus the number of throws consumed during the round. So if you hit your opponent after three bananas you get 7 points for example. A draw means 0 points for both players. If you hit the sun you get an addional 10 points for that round, even if you lose that round. When the game is finished, the winner gets the difference between the two scores as the winning score.

  
        <hr>
        <button class="modal-btn-ok" onclick="closeModal('rules_info')">
          < <ok><u>O</u>k</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end Rules modal -->

  <div id="new_player" class="modal"> <!-- start New Player modal -->
    <div class="modal-content">
      <div class="modal-box">
        <br/>
        New Player<br>
        <br>
        <label for="player_name">Enter name: </label>
        <input class="modal-input" type="text" id="player_name"><br>
        <div class="modal-input-group">
          <label for="player_email">Enter mail: </label>
          <input class="modal-input" type="email" id="player_email"><br>
        </div>
        <hr>
        <button class="modal-btn-ok" onclick="closeModalAndCreatePlayer()">
          < <ok><u>C</u>reate new player</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end Rules modal -->

  <div id="winner_modal" class="modal"> <!-- start winner modal -->
    <div class="modal-content">
      <div class="modal-box">
        <span id="winner_modal_msg"></span>
        <hr>
        <button class="modal-btn-ok" onclick="closeModal('winner_modal')">
          < <ok><u>O</u>k</ok> >
        </button>
        <br/>
      </div>
    </div>
  </div> <!-- end winner modal -->

</body>
</html>
